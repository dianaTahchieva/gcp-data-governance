# gcp-data-catalog-terraform

This project automates the creation and management of Data Catalog and BigQuery resources on Google Cloud Platform (GCP) using Terraform. The goal is to streamline the setup and management of your data catalog, datasets, and tables, ensuring data is well-organized and easily accessible.

## Table of Contents
- Overview
- Features
- Prerequisites
- Setup Instructions
- Project Structure
- Usage
- Potential Issues & Solutions
- License

## Overview
This repository contains Terraform code to:
- Create a Google BigQuery dataset for storing and managing data.
- Define BigQuery tables with configurations and data structures.
- Set up Google Cloud Data Catalog to organize and classify data using taxonomies and policy tags.
- Automate service account creation with appropriate IAM roles for seamless data access.

By leveraging Terraform, this project automates the entire process, making your data environment reproducible and manageable with version control.

## Features
- **BigQuery Dataset and Tables:** Automates the creation and management of BigQuery datasets and tables.
- **Data Catalog Taxonomy:** Streamlines the creation of taxonomies and policy tags in Google Cloud Data Catalog.
- **Service Accounts & IAM:** Sets up service accounts with specific IAM roles for controlled access.
- **Terraform Automation:** Simplifies the management and deployment of GCP resources.

## Prerequisites
Before using this repository, ensure you have the following:

- **Google Cloud Platform (GCP) account:** A GCP account with project access.
- **Terraform:** Install Terraform by following the [official installation guide](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli).
- **GCP Project Setup:** Ensure your project has the necessary APIs enabled:
  - BigQuery API
  - Data Catalog API
  - Billing API (ensure billing is enabled)
- **Google Cloud SDK:** Install the Google Cloud SDK for authentication and interaction with GCP.

## Setup Instructions
### 1. Clone the Repository
Clone this repository to your local machine:
```bash
git clone https://github.com/dianaTahchieva/gcp-data-catalog-terraform.git
cd gcp-data-catalog-terraform
```

### 2. Authenticate with Google Cloud
Authenticate Terraform with your Google Cloud account:
```bash
gcloud auth application-default login
```
Ensure your account has the necessary permissions to create resources.

### 3. Initialize Terraform
Run the following command to initialize the Terraform working directory:
```bash
terraform init
```
This downloads necessary provider plugins and sets up the working directory.

### 4. Configure Terraform Variables
Edit the `variables.tf` file and set the following values:
```hcl
variable "project_id" {
  default = "your-gcp-project-id"
}

variable "region" {
  default = "europe-west6"
}
```
Alternatively, you can configure these variables directly in your terminal when running `terraform apply`.

### 5. Apply Terraform Plan
Run the following command to apply the Terraform plan:
```bash
terraform apply
```
Review the proposed changes and confirm by typing `yes`. Terraform will then create the necessary BigQuery datasets, tables, policy tags, service accounts, and IAM roles.

## Project Structure
The repository is organized as follows:
```
gcp-data-catalog-terraform/
├── variables.tf       # Terraform variables
├── outputs.tf         # Outputs (dataset, table IDs)
├── bigquery.tf        # BigQuery dataset and table creation
├── bigquery_policy.tf # Applies policy tags to BigQuery tables
├── datacatalog.tf     # Data Catalog taxonomy and policy tags
└── iam.tf             # Service accounts and IAM roles configuration
```

## Usage
After applying the Terraform plan, you can:
- **Query data in BigQuery:** Access and analyze your data.
- **Manage metadata in Data Catalog:** Organize, classify, and enforce data governance policies.

## Potential Issues & Solutions
### Billing Disabled Error
If you receive a `BILLING_DISABLED` error, enable billing for your project via the [GCP Billing Console](https://console.cloud.google.com/billing).

### API Not Enabled Error
If you receive a `SERVICE_DISABLED` error for Data Catalog or BigQuery, enable the required APIs in the [GCP API Library](https://console.cloud.google.com/apis/library).

### Permission Issues
Ensure your account has sufficient permissions, including:
- `roles/bigquery.admin`
- `roles/datacatalog.admin`
- `roles/iam.serviceAccountAdmin`

### Terraform Initialization Issues
If `terraform init` fails, try running it again with a stable internet connection and verify provider configurations.

## License
This project is licensed under the MIT License. See the `LICENSE` file for details.

